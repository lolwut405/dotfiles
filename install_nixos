# 20.03 beta - minimal iso - https://releases.nixos.org/nixos/20.03/nixos-20.03beta874.b0c285807d6

# Partition
sudo su -
parted /dev/sda -- mklabel msdos
parted /dev/sda -- mkpart primary 1Mib 100%
mkfs.xfs /dev/sda1
mount /dev/sda1 /mnt

# Generate config
nixos-generate-config --root /mnt

# Modify config
vim /mnt/etc/nixos/configuration.nix 
uncomment the line:
boot.loader.grub.device = "/dev/sda";

### ADVANCED: use my custom config instead
### curl -L https://git.io/JvFRA -o /mnt/etc/nixos/configuration.nix

# Install and reboot
nixos-install
poweroff and remove livecd

# First boot as root
useradd -m -G wheel blah
passwd blah
passwd -l root

Pull down custom config
curl -L https://git.io/JvFRA -o /etc/nixos/configuration.nix
nixos-rebuild switch

Add packages and tweaks
vim /etc/nixos/configuration.nix
nixos-rebuild switch

# Guides
# https://nixos.org/nixos/manual/
# https://nixos.org/nixos/packages.html
# https://nixos.org/nixos/options.html
# https://nixos.wiki/wiki/Cheatsheet
# https://nixos.org/nixos/nix-pills/
# http://johnduhamel.io/posts/2019-01-18-nixos-install.html
# http://johnduhamel.io/posts/2019-01-29-nixos-i3-setup.html
# https://functor.tokyo/blog/2018-02-20-show-packages-installed-on-nixos

TIPS
# Rollback: nixos-rebuild --rollback
# Install/remove packages preferably via configuration only
# Install: nix-env -i htop
# Uninstall: nix-env --uninstall htop
